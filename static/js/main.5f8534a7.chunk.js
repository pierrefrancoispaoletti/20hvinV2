(this["webpackJsonp20hvin-v2-frontend"]=this["webpackJsonp20hvin-v2-frontend"]||[]).push([[0],{107:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(14),o=n.n(i),c=(n(107),n(23)),r=n(55),s=n(10),l=n(64),d=n(13),u=[{categoryName:"suggestions",title:"Suggestions",icon:" /assets/icons/suggestions.png"},{categoryName:"pizzas",title:"Pizzas",tags:["Rouge","Blanche"],icon:" /assets/icons/pizza.png"},{categoryName:"pasta",title:"La Pasta",icon:" /assets/icons/spaguetti.png"},{categoryName:"menu-enfant",title:"Menu Enfant",icon:" /assets/icons/girl.png"},{categoryName:"cote-mer",title:"Cot\xe9 Mer",icon:" /assets/icons/fish.png"},{categoryName:"pizzas-sucrees",title:"Pizzas sucr\xe9es",icon:" /assets/icons/pizza-nutella.png"},{categoryName:"antipasti",title:"Antipasti",icon:" /assets/icons/antipasto.png"},{categoryName:"douceur",title:"Nos Douceurs du Jour",icon:" /assets/icons/cupcake.png"},{categoryName:"vins",title:"Vins",tags:["Rouge","Blanc","Ros\xe9","50cl","75cl","Au Verre","Magnum","Muscat"],icon:" /assets/icons/wine.png"},{categoryName:"champagnes",title:"Champagnes",tags:["Brut","Blanc de Blanc","Ros\xe9","75cl","La Coupe","La Piscine","Magnum"],icon:" /assets/icons/champagne.png"},{categoryName:"softs",title:"Softs",icon:" /assets/icons/soft-drink.png"},{categoryName:"cocktails",title:"Cocktails",tags:["Avec Alcool","Sans Alcool"],icon:" /assets/icons/cocktail.png"},{categoryName:"aperitifs",title:"Aperitifs",icon:" /assets/icons/aperitive.png"},{categoryName:"digestifs",title:"Digestifs",icon:" /assets/icons/cognac.svg"},{categoryName:"bieres",title:"Bi\xe8res",icon:" /assets/icons/beer.png"}],p="https://backend20h20.herokuapp.com",j=n(178),b=n(26),g=n(180),f=n(143),h=n(199),m=n(182),O=n(185),x=n(205),v=n(188),y=n(207),C=n(200),S=n(208),w=n(186),N=n(209),_=n(145),k=n(183),P=n(184),M=n(25),F=n.n(M),A=n(2),B=function(e){e.products;var t=e.setProducts,n=e.showAddProduct,i=e.setShowAddProduct,o=e.setOpenLoginModal,c=Object(d.h)(),r=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",padding:e.spacing(1)},formControl:{margin:e.spacing(1)},selectEmpty:{marginTop:e.spacing(2)},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)},input:{display:"none"}}}));function l(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var M=Object(b.a)(),B={PaperProps:{style:{maxHeight:224,width:250}}},D=r(),z=Object(a.useState)(""),I=Object(s.a)(z,2),L=I[0],W=I[1],E=Object(a.useState)(""),T=Object(s.a)(E,2),U=T[0],q=T[1],G=Object(a.useState)(null),R=Object(s.a)(G,2),H=R[0],V=R[1],J=Object(a.useState)(""),Z=Object(s.a)(J,2),X=Z[0],Y=Z[1],K=Object(a.useState)([]),Q=Object(s.a)(K,2),$=Q[0],ee=Q[1],te=Object(a.useState)(""),ne=Object(s.a)(te,2),ae=ne[0],ie=ne[1],oe=function(e){ee(e.target.value)};return Object(a.useEffect)((function(){Y(c.category)}),[c]),console.log(ae),Object(A.jsxs)(g.a,{children:[Object(A.jsx)(f.a,{style:{textAlign:"center"},variant:"h4",children:"Ajouter un Produit"}),Object(A.jsx)(h.a,{style:{display:"flex",justifyContent:"center"},children:Object(A.jsx)(m.a,{onClick:function(){return i(!n)},children:n?Object(A.jsx)(P.a,{fontSize:"large",style:{color:"red"}}):Object(A.jsx)(k.a,{fontSize:"large",style:{color:"green"}})})}),Object(A.jsx)(O.a,{in:n,children:Object(A.jsxs)("form",{className:D.root,onSubmit:function(e){e.preventDefault();var n=new FormData;n.append("title",L),n.append("description",U),n.append("price",H),n.append("category",X),n.append("tag",$||[]),n.append("image",ae);var a=localStorage.getItem("token20hvin");a?F()({method:"post",url:"".concat(p,"/api/products/createProduct"),data:n,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+a}}).then((function(e){t(e.data.data)})).then((function(){W(""),q(""),V(null),ee([]),ie("")})):o(!0)},encType:"multipart/form-data",children:[Object(A.jsx)(x.a,{id:"title",label:"Nom du produit",fullWidth:!0,value:L,onChange:function(e){return W(e.target.value)},required:!0}),Object(A.jsx)(x.a,{id:"description",fullWidth:!0,multiline:!0,label:"Description du produit",value:U,onChange:function(e){return q(e.target.value)},rows:4}),Object(A.jsx)(x.a,{id:"price",fullWidth:!0,label:"Prix du produit",required:!0,type:"number",InputProps:{inputProps:{min:0,step:.5}},value:H,onChange:function(e){return V(e.target.value)}}),Object(A.jsxs)(v.a,{className:D.formControl,fullWidth:!0,required:!0,children:[Object(A.jsx)(y.a,{id:"demo-simple-select-label",children:"Categorie"}),Object(A.jsx)(C.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:X,onChange:function(e){Y(e.target.value)},children:u.map((function(e){return Object(A.jsx)(S.a,{value:e.categoryName,children:e.title})}))})]}),u.map((function(e){return void 0!==e.tags&&e.categoryName===X&&Object(A.jsxs)(v.a,{className:D.formControl,fullWidth:!0,required:!0,children:[Object(A.jsx)(y.a,{id:"demo-mutiple-chip-label",children:"Tags"}),Object(A.jsx)(C.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",multiple:!0,value:$,onChange:oe,input:Object(A.jsx)(w.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(A.jsx)("div",{className:D.chips,children:e.map((function(e){return Object(A.jsx)(N.a,{label:e,className:D.chip},e)}))})},MenuProps:B,children:u.map((function(e){return void 0!==e.tags&&e.categoryName===X&&e.tags.map((function(e){return Object(A.jsx)(S.a,{value:e,style:l(e,$,M),children:e},e)}))}))})]})})),Object(A.jsx)("input",{accept:"image/*",className:D.input,id:"contained-button-file",files:ae,type:"file",onChange:function(e){return ie(e.target.files[0])}}),Object(A.jsx)("label",{htmlFor:"contained-button-file",children:Object(A.jsx)(_.a,{fullWidth:!0,variant:"contained",color:"secondary",component:"span",style:{margin:"5px"},children:"Ajouter une image"})}),Object(A.jsx)(_.a,{fullWidth:!0,color:"primary",type:"submit",variant:"contained",children:"Ajouter un produit"})]})})]})},D=(n(138),function(e){var t=e.loading;return Object(a.useEffect)((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=document.querySelector(".wine-loader__wine__stop-1"),n=document.querySelector(".wine-loader__wine__stop-2"),a=.98,i=a/50,o=-1;window.setInterval((function(){var e=t.offset.baseVal;.98!=e.toFixed(2)&&0!=e.toFixed(2)||(o*=-1),t.setAttribute("offset",t.offset.baseVal+i*o),n.setAttribute("offset",n.offset.baseVal+i*o)}),e)}()}),[t]),Object(A.jsx)("div",{class:"wine-loader",children:Object(A.jsx)("div",{class:"wine__icon",children:Object(A.jsxs)("svg",{width:"103",height:"221",viewBox:"0 0 103 221",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(A.jsx)("ellipse",{class:"wine-loader__base",cx:"53.3448",cy:"211.131",rx:"29.0207",ry:"7.82862",fill:"#CFD8DE"}),Object(A.jsx)("path",{d:"M24.9364 211.214C27.6951 222.779 79.646 221.775 81.9479 211.214",stroke:"#BBC6CD"}),Object(A.jsx)("path",{class:"wine-loader__stem__line",d:"M45.2728 207.773C45.7034 208.026 49.3507 211.546 53.682 211.243C58.0132 210.939 60.926 208.862 61.8885 207.773",stroke:"#BBC6CD"}),Object(A.jsx)("path",{class:"wine-loader__stem",d:"M50.6965 182.111C50.8778 170.978 49.962 146.421 45.1195 138.867L52.1696 139.268C52.1696 139.268 62.3279 137.937 60.0944 138.327C57.8609 138.717 55.6702 160.724 55.9189 182.111C56.1178 199.22 59.9807 206.316 61.8873 207.725C59.732 210.295 53.3747 213.893 45.1873 207.725C49.9316 203.349 50.8369 188.825 50.6965 182.111Z",fill:"#D0E0EA"}),Object(A.jsx)("path",{class:"wine-loader__glass__shadow",d:"M59.4114 138.925C56.0309 139.499 48.3337 139.095 45.2942 139.095C46.5273 141.306 47.4156 144.254 47.7051 145.595H57.854C58.0003 144.461 58.5397 141.519 59.4114 138.925Z",fill:"url(#paint0_linear)","fill-opacity":"0.14"}),Object(A.jsx)("path",{class:"wine-loader__glass",d:"M102.699 107.453C102.39 90.0012 93.8088 39.3831 85.6992 7.45316H13.5996C6.10754 44.9654 -0.414182 90.3732 0.329871 107.453C1.07392 124.533 22.2793 139.414 52.4133 139.414C82.5473 139.414 103.009 124.905 102.699 107.453Z",fill:"url(#paint1_linear)"}),Object(A.jsx)("path",{d:"M96.7567 80.0351L5.09615 79.0666C5.09615 79.0666 3.13212 89.4363 3.84069 105.702C4.54926 121.967 23.7434 136.138 52.4403 136.138C81.1371 136.138 99.6227 122.321 99.328 105.702C99.0333 89.082 96.7567 80.0351 96.7567 80.0351Z",fill:"url(#paint3_linear)"}),Object(A.jsx)("path",{class:"wine-loader__shine--light",opacity:"0.3",d:"M32.5024 127.848C-7.72748 120.164 6.69586 94.7077 17.1336 14.617C26.1615 17.7811 31.8243 17.5551 34.0844 17.7811C30.4682 44.2243 23.8236 105.247 32.5024 127.848Z",fill:"url(#paint5_linear)"}),Object(A.jsxs)("defs",{children:[Object(A.jsxs)("linearGradient",{id:"paint0_linear",x1:"52.2767",y1:"139.286",x2:"52.2767",y2:"145.595",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{}),Object(A.jsx)("stop",{offset:"1","stop-opacity":"0"})]}),Object(A.jsxs)("linearGradient",{id:"paint1_linear",x1:"102.703",y1:"105.11",x2:"0.271844",y2:"105.11",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{"stop-color":"#BDC8CF"}),Object(A.jsx)("stop",{offset:"0.502762","stop-color":"#F6F9FC"}),Object(A.jsx)("stop",{offset:"1","stop-color":"#BDC8CF"})]}),Object(A.jsxs)("linearGradient",{id:"paint2_linear",x1:"13.5925",y1:"10.1636",x2:"85.6914",y2:"7.33961",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{"stop-color":"#E0F1FC"}),Object(A.jsx)("stop",{offset:"0.502762","stop-color":"#C5D7E2"}),Object(A.jsx)("stop",{offset:"1","stop-color":"#E0F1FC"})]}),Object(A.jsxs)("linearGradient",{id:"paint3_linear",x1:"51.509",y1:"77.6027",x2:"51.509",y2:"136.138",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{class:"wine-loader__wine__stop-1",offset:"0","stop-color":"transparent"}),Object(A.jsx)("stop",{class:"wine-loader__wine__stop-2",offset:"0.000001","stop-color":"#903A3A"}),Object(A.jsx)("stop",{class:"wine-loader__wine__stop-3",offset:".999999","stop-color":"#551B1B"}),Object(A.jsx)("stop",{class:"wine-loader__wine__stop-4",offset:"1","stop-color":"transparent"})]}),Object(A.jsxs)("linearGradient",{id:"paint4_linear",x1:"50.8837",y1:"73.5379",x2:"50.8837",y2:"86.4282",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{"stop-color":"#883A3A"}),Object(A.jsx)("stop",{offset:"1","stop-color":"#A14545"})]}),Object(A.jsxs)("linearGradient",{id:"paint5_linear",x1:"9.22325",y1:"74.5097",x2:"28.8862",y2:"75.6398",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{"stop-color":"white"}),Object(A.jsx)("stop",{offset:"0.690608","stop-color":"white","stop-opacity":"0"}),Object(A.jsx)("stop",{offset:"1","stop-color":"white","stop-opacity":"0"})]}),Object(A.jsxs)("linearGradient",{id:"paint6_linear",x1:"93.0295",y1:"75.5097",x2:"74.5723",y2:"76.5051",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{}),Object(A.jsx)("stop",{offset:"0.690608","stop-opacity":"0"}),Object(A.jsx)("stop",{offset:"1","stop-opacity":"0"})]})]})]})})})}),z=n(190),I=n(191),L=n(192),W=n(193),E=n(194),T=n(202),U=function(e){var t=e.openEditModal,n=e.setOpenEditModal,i=e.product,o=e.setProducts,r=e.setLoading,l=e.setOpenLoginModal,d=i.title,g=i.description,f=i.price,h=i.category,m=i.tag,O=Object(a.useState)(d),k=Object(s.a)(O,2),P=k[0],M=k[1],B=Object(a.useState)(g),D=Object(s.a)(B,2),z=D[0],I=D[1],L=Object(a.useState)(f),W=Object(s.a)(L,2),E=W[0],U=W[1],q=Object(a.useState)(h),G=Object(s.a)(q,2),R=G[0],H=G[1],V=Object(a.useState)(m),J=Object(s.a)(V,2),Z=J[0],X=J[1],Y=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",padding:e.spacing(1)},modal:{marginTop:"50%"},formControl:{margin:e.spacing(1)},selectEmpty:{marginTop:e.spacing(2)},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)},input:{display:"none"}}}));function K(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var Q=Object(b.a)(),$={PaperProps:{style:{maxHeight:224,width:250}}},ee=Y(),te=function(e){X(e.target.value)};return Object(A.jsx)(T.a,{open:t,onClose:function(){return n(!1)},className:ee.modal,children:Object(A.jsxs)("form",{className:ee.root,onSubmit:function(e){e.preventDefault();var t=localStorage.getItem("token20hvin");if(t){r(!0);var a=Object(c.a)({},i);a.title=P||d,a.description=z,a.price=E||f,a.category=R||R,a.tag=Z||m,a.visibility=i.visibility,F()({method:"post",url:"".concat(p,"/api/products/updateProduct"),data:{update:a,productId:i._id,productCategory:i.category},headers:{Authorization:"Bearer "+t}}).then((function(e){return o(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return r(!1)}))}else n(!1),l(!0)},children:[Object(A.jsx)(x.a,{id:"title",label:"Nom du produit",fullWidth:!0,value:P,onChange:function(e){return M(e.target.value)},required:!0}),Object(A.jsx)(x.a,{id:"description",fullWidth:!0,multiline:!0,label:"Description du produit",value:z,onChange:function(e){return I(e.target.value)},rows:4}),Object(A.jsx)(x.a,{id:"price",fullWidth:!0,label:"Prix du produit",required:!0,type:"number",InputProps:{inputProps:{min:0,step:.5}},value:E,onChange:function(e){return U(e.target.value)}}),Object(A.jsxs)(v.a,{className:ee.formControl,fullWidth:!0,required:!0,children:[Object(A.jsx)(y.a,{id:"demo-simple-select-label",children:"Categorie"}),Object(A.jsx)(C.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:R,onChange:function(e){H(e.target.value)},children:u.map((function(e){return Object(A.jsx)(S.a,{value:e.categoryName,children:e.title},e)}))})]}),u.map((function(e){return void 0!==e.tags&&e.categoryName===R&&Object(A.jsxs)(v.a,{className:ee.formControl,fullWidth:!0,required:!0,children:[Object(A.jsx)(y.a,{id:"demo-mutiple-chip-label",children:"Tags"}),Object(A.jsx)(C.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",multiple:!0,value:Z,onChange:te,input:Object(A.jsx)(w.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(A.jsx)("div",{className:ee.chips,children:e.map((function(e){return Object(A.jsx)(N.a,{label:e,className:ee.chip},e)}))})},MenuProps:$,children:u.map((function(e){return void 0!==e.tags&&e.categoryName===R&&e.tags.map((function(e){return Object(A.jsx)(S.a,{value:e,style:K(e,Z,Q),children:e},e)}))}))})]})})),Object(A.jsxs)(_.a,{color:"primary",type:"submit",variant:"contained",children:["Editer le produit ","".concat(i.category," ").concat(i.title)]})]})})},q=function(e){var t,n=e.image,a=e.title,i=e.openProductImageModal,o=e.setOpenProductImageModal,c="data:".concat(null===n||void 0===n?void 0:n.contentType,";base64,"),r=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.data);return Object(A.jsx)(T.a,{style:{marginTop:"50%"},open:i,onClose:function(){return o(!1)},children:Object(A.jsx)("img",{style:{width:"100%",objectFit:"cover"},src:c+r,alt:a})})},G=function(e){var t=e.product,n=e.handleDeleteProduct,i=e.setProducts,o=e.setLoading,r=e.user,d=e.setOpenLoginModal,u=Object(a.useState)(!1),j=Object(s.a)(u,2),b=j[0],g=j[1],h=Object(a.useState)(!1),O=Object(s.a)(h,2),x=O[0],v=O[1];return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(U,{setOpenLoginModal:d,product:t,openEditModal:b,setOpenEditModal:g,setProducts:i,setLoading:o}),Object(A.jsx)(q,Object(c.a)(Object(c.a)({},t),{},{openProductImageModal:x,setOpenProductImageModal:v})),"isAdmin"===r&&Object(A.jsxs)(z.a,{variant:"contained",size:"large",children:[Object(A.jsx)(m.a,{size:"medium",onClick:function(){return n(null===t||void 0===t?void 0:t._id,null===t||void 0===t?void 0:t.category)},children:Object(A.jsx)(P.a,{fontSize:"large",style:{color:"red",backgroundColor:"whitesmoke",borderRadius:"100%"}})}),Object(A.jsx)(m.a,{size:"medium",onClick:function(){var e=Object(c.a)({},t);e.visibility=!t.visibility;var n=localStorage.getItem("token20hvin");n?(o(!0),F()({method:"post",url:"".concat(p,"/api/products/updateProduct"),data:{update:e,productId:t._id,productCategory:t.category},headers:{Authorization:"Bearer "+n}}).then((function(e){return i(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return o(!1)}))):d(!0)},children:t&&!t.visibility?Object(A.jsx)(I.a,{fontSize:"large",style:{color:"grey",backgroundColor:"whitesmoke",borderRadius:"100%"}}):Object(A.jsx)(L.a,{fontSize:"large",style:{color:"grey",backgroundColor:"whitesmoke",borderRadius:"100%"}})}),Object(A.jsx)(m.a,{size:"medium",onClick:function(){return g(!0)},children:Object(A.jsx)(W.a,{fontSize:"large",style:{color:"green",backgroundColor:"whitesmoke",borderRadius:"100%"}})})]}),("isAdmin"===r||(null===t||void 0===t?void 0:t.visibility))&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{style:{display:"flex",flexDirection:"row",flexGrow:1,marginBottom:2,marginTop:8},children:Object(A.jsxs)("div",{style:{display:"flex",flexGrow:1,alignSelf:"flex-start",justifyContent:"space-between"},children:[Object(A.jsxs)(f.a,{style:{borderBottom:"1px solid #FF3B2D",fontSize:"1.1em"},children:[(null===t||void 0===t?void 0:t.visibility)?null===t||void 0===t?void 0:t.title:"Cach\xe9 : ".concat(null===t||void 0===t?void 0:t.title),t.image&&Object(A.jsx)(m.a,{color:"inherit",onClick:function(){return v(!0)},children:Object(A.jsx)(E.a,{})})]}),Object(A.jsxs)(f.a,{variant:"body1",component:"span",children:[null===t||void 0===t?void 0:t.price.toFixed(2),"\u20ac"]})]})}),Object(A.jsx)(f.a,{variant:"body2",component:"p",style:{marginBottom:8,marginTop:3},children:Object(A.jsx)(l.a,{children:null===t||void 0===t?void 0:t.description})}),("vins"===(null===t||void 0===t?void 0:t.category)||"champagnes"===(null===t||void 0===t?void 0:t.category))&&(null===t||void 0===t?void 0:t.tag.map((function(e){return Object(A.jsx)(f.a,{variant:"body2",component:"span",children:" ".concat(e," ")},(null===t||void 0===t?void 0:t.category)+e)})))]})]})},R=n(5),H=n(195),V=n(201),J=n(196),Z=function(e){var t=e.tags,n=e.setFilter,i=Object(a.useState)(0),o=Object(s.a)(i,2),r=o[0],l=o[1],d=Object(j.a)((function(e){return{root:{display:"flex",justifyContent:"center",margin:e.spacing(2),backgroundColor:"#202020"},appbar:{backgroundColor:"#202020"}}})),u=Object(R.a)({indicator:{backgroundColor:"#FF3B2D"}})(V.a),p=d(),b=function(e){return{id:"tagSelector-tab-".concat(e),"aria-controls":"tagSelector-tabpanel-".concat(e)}};return Object(A.jsx)("div",{className:p.root,children:(void 0!==t||t!==[])&&Object(A.jsx)(H.a,{position:"static",className:p.appbar,children:Object(A.jsxs)(u,{value:r,onChange:function(e,t){l(t)},"aria-label":"tag selector",variant:"scrollable",scrollButtons:"on",children:[Object(A.jsx)(J.a,Object(c.a)({onClick:function(){return n("")},label:"Tout"},b(0)),"All"),t.map((function(e,t){return Object(A.jsx)(J.a,Object(c.a)({onClick:function(){return n(e)},label:e},b(t)),"tag ".concat(e))}))]})})})},X=function(e){var t=e.product,n=e.products,i=e.setProducts,o=e.user,c=e.setOpenLoginModal,r=Object(a.useState)(!1),l=Object(s.a)(r,2),b=l[0],m=l[1],O=Object(d.h)().category,x=Object(a.useState)([]),v=Object(s.a)(x,2),y=v[0],C=v[1],S=Object(a.useState)(""),w=Object(s.a)(S,2),N=w[0],_=w[1],k=Object(a.useState)(n),P=Object(s.a)(k,2),M=P[0],B=P[1],z=Object(j.a)((function(e){return{titleWrapper:{display:"flex",justifyContent:"center"},title:{display:"inline",borderBottom:"2px solid #FF3B2D",margin:e.spacing(2)}}}))();Object(a.useEffect)((function(){B(""===N?n:function(e,t){return t?e.filter((function(e){return e.tag.includes(t)})):e}(n,N))}),[N,O,n]),Object(a.useEffect)((function(){_("");var e=u.filter((function(e){return e.categoryName===O}));C(e[0].tags),m(!0),F()({method:"get",url:"".concat(p,"/api/products/").concat(O)}).then((function(e){i(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return m(!1)}))}),[O]);var I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,n=localStorage.getItem("token20hvin");n?(m(!0),F()({method:"delete",url:"".concat(p,"/api/products/deleteProduct"),data:{productId:e,productCategory:t},headers:{Authorization:"Bearer "+n}}).then((function(e){return i(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return m(!1)}))):c(!0)};return Object(A.jsxs)(g.a,{className:z.root,component:"div",children:[y&&Object(A.jsx)(Z,{tags:y,setFilter:_,products:n}),Object(A.jsxs)(g.a,{children:[!b&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(h.a,{component:"div",className:z.titleWrapper,children:Object(A.jsx)(f.a,{variant:"h4",component:"h2",className:z.title,children:t})}),M&&M.sort((function(e,t){return t.price-e.price})).map((function(e){return Object(A.jsx)(G,{product:e,handleDeleteProduct:I,setProducts:i,setLoading:m,user:o,setOpenLoginModal:c},null===e||void 0===e?void 0:e._id)}))]}),b&&Object(A.jsx)(D,{loading:b})]})]})},Y=n(204),K=n(203),Q=function(e){var t=e.openLoginModal,n=e.setOpenLoginModal,i=e.setUser,o=Object(a.useState)(""),c=Object(s.a)(o,2),r=c[0],l=c[1],d=Object(a.useState)(""),u=Object(s.a)(d,2),b=u[0],h=u[1],m=Object(a.useState)(""),O=Object(s.a)(m,2),v=O[0],y=O[1],C=Object(a.useState)(!1),S=Object(s.a)(C,2),w=S[0],N=S[1],k=Object(a.useState)(!1),P=Object(s.a)(k,2),M=(P[0],P[1]),B=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",padding:e.spacing(1)},modal:{marginTop:"50%"},input:{margin:e.spacing(3)}}}))();return Object(A.jsx)(T.a,{className:B.modal,open:t,onClose:function(){return n(!1)},children:Object(A.jsxs)("form",{className:B.root,onSubmit:function(e){e.preventDefault(),F()({method:"post",url:"".concat(p,"/auth/login"),data:{email:r,password:b}}).then((function(e){e&&200===e.data.status?(N(!1),i(e.data.role),localStorage.setItem("token20hvin",e.data.token),y(e.data.message),setTimeout((function(){n(!1)}),5e3)):(N(!0),y(e.data.message))}))},children:[Object(A.jsx)(g.a,{style:{borderBottom:"1px solid black",textAlign:"center"},children:Object(A.jsx)(f.a,{variant:"h6",children:"Se connecter"})}),Object(A.jsx)(Y.a,{open:!!v,autoHideDuration:5e3,onClose:function(){return M(!1)},children:Object(A.jsx)(K.a,{severity:w?"error":"success",onClose:function(){return M(!1)},children:v})}),Object(A.jsx)(x.a,{error:w,className:B.input,label:"Email",type:"email",value:r,onChange:function(e){return l(e.target.value)},required:!0,fullWidth:!0}),Object(A.jsx)(x.a,{error:w,className:B.input,label:"Mot de passe",type:"password",value:b,onChange:function(e){return h(e.target.value)},required:!0,fullWidth:!0}),Object(A.jsx)(_.a,{className:B.input,type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Se Connecter"})]})})},$=n(197),ee=(n(139),function(){return Object(A.jsxs)(f.a,{className:"copyright",variant:"body2",align:"center",children:["Copyright \xa9 ",Object(A.jsx)($.a,{color:"inherit",href:"https://20h20.fr/",children:"Le 20HeuresVin"})," ",(new Date).getFullYear(),"."]})}),te=n(46),ne=function(e){var t=e.setProduct,n=Object(j.a)((function(e){return{nav:{overflowX:"auto",padding:"8px 0px",display:"flex"},ul:{padding:"0px 8px",margin:"auto",display:"flex",alignItems:"flex-start",listStyle:"none"},li:{width:"80px",alignItems:"center",display:"flex",flexDirection:"column",position:"relative"},imgWrapper:{height:"60px",width:"60px",position:"relative"},image:{height:"100%",width:"100%"},span:{lineHeight:"16px",fontSize:"14px",textAlign:"center",width:"100%"}}}))();return"/"===Object(d.g)().pathname&&t("Suggestions"),Object(A.jsx)("nav",{className:n.nav,children:Object(A.jsx)("ul",{className:n.ul,children:u.map((function(e){return Object(A.jsx)(te.c,{style:{textDecoration:"none",color:"inherit"},activeStyle:{padding:"4px",backgroundColor:"#202020",fontWeight:"bold",color:"#FF3B2D"},to:"/produits/".concat(e.categoryName),onClick:function(){return t(e.title)},children:Object(A.jsxs)("li",{className:n.li,children:[Object(A.jsx)("div",{className:n.imgWrapper,children:Object(A.jsx)("img",{className:n.image,src:e.icon,alt:e.categoryName})}),Object(A.jsx)("span",{className:n.span,children:e.title})]})},e.categoryName)}))})})},ae=n(198),ie=function(e){var t=e.setOpenLoginModal,n=e.user,a=Object(j.a)((function(e){return{root:{flexGrow:1,marginBottom:e.spacing(2),backgroundColor:"black",borderBottom:"1px solid #FF3B2D"},menuButton:{marginRight:e.spacing(2)},imageContainer:{flexGrow:1},image:{width:"150px",height:"75px"},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"}}}))();return Object(A.jsx)("div",{className:a.root,children:Object(A.jsx)(H.a,{position:"static",color:"transparent",children:Object(A.jsxs)(ae.a,{children:[Object(A.jsx)("div",{className:a.imageContainer,children:Object(A.jsx)(te.b,{to:"/",children:Object(A.jsx)("img",{src:" /assets/logo/20hvin.png",className:a.image,alt:"logo 20hvin"})})}),Object(A.jsx)(_.a,{color:"inherit",disabled:!!n,onClick:function(){return t(!0)},children:n?"Conn\xe9ct\xe9 !":"Me Connecter"})]})})})},oe=(n(140),function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)([]),u=Object(s.a)(o,2),p=u[0],j=u[1],b=Object(a.useState)(!1),g=Object(s.a)(b,2),f=g[0],h=g[1],m=Object(a.useState)(""),O=Object(s.a)(m,2),x=O[0],v=O[1],y=Object(a.useState)(!1),C=Object(s.a)(y,2),S=C[0],w=C[1],N=navigator.language||navigator.userLanguage,_={get:function(e,t){return((JSON.parse(localStorage.getItem("translations"))||{})[t]||{})[e]},set:function(e,t,n){var a=JSON.parse(localStorage.getItem("translations"))||Object(r.a)({},t,{});a[t]=Object(c.a)(Object(c.a)({},a[t]),{},Object(r.a)({},e,n)),localStorage.setItem("translations",JSON.stringify(a))}};return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(l.b,{cacheProvider:_,from:"fr",to:N,googleApiKey:"AIzaSyBlV19qRfHj05YOzkkavxXTS2HGx2D54Ps",children:Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)(ie,{setOpenLoginModal:h,user:x}),Object(A.jsx)(Q,{openLoginModal:f,setUser:v,setOpenLoginModal:h}),Object(A.jsx)(ne,{setProduct:i}),Object(A.jsxs)(d.d,{children:[Object(A.jsx)(d.b,{exact:!0,path:"/",children:Object(A.jsx)(d.a,{to:"/produits/suggestions"})}),Object(A.jsxs)(d.b,{path:"/produits/:category",children:["isAdmin"===x&&Object(A.jsx)(B,{showAddProduct:S,setShowAddProduct:w,products:p,setProducts:j,setOpenLoginModal:h}),Object(A.jsx)(X,{products:p,setProducts:j,product:n,user:x,setOpenLoginModal:h})]})]})]})}),Object(A.jsx)(ee,{})]})}),ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,211)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),o(e),c(e)}))};o.a.render(Object(A.jsx)(te.a,{basename:"/",children:Object(A.jsx)(oe,{})}),document.getElementById("root")),ce()}},[[141,1,2]]]);
//# sourceMappingURL=main.5f8534a7.chunk.js.map