(this["webpackJsonp20hvin-v2-frontend"]=this["webpackJsonp20hvin-v2-frontend"]||[]).push([[0],{113:function(e,t,a){},142:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(14),o=a.n(i),c=(a(113),a(28)),r=a(55),s=a(8),l=a(66),d=a(13),u=[{categoryName:"suggestions",title:"Menu Corse",icon:" /assets/icons/bandera20h20.png",description1:"Assortiment de charcuteries corse",description2:"Gnocchi \xe0 la tome corse",description3:"Tiramisu Ch\xe2taigne / Canistrelli"},{categoryName:"antipasti",title:"Cot\xe9 Ap\xe9ro",icon:" /assets/icons/antipasto.png"},{categoryName:"pizzas",title:"Pizzas",tags:["Rouge","Blanche"],icon:" /assets/icons/pizza.png"},{categoryName:"pasta",title:"La Pasta",icon:" /assets/icons/spaguetti.png"},{categoryName:"cote-mer",title:"Cot\xe9 Mer",icon:" /assets/icons/fish.png"},{categoryName:"menu-enfant",title:"Menu Enfant",icon:" /assets/icons/girl.png"},{categoryName:"pizzas-sucrees",title:"Pizzas sucr\xe9es",icon:" /assets/icons/pizza-nutella.png"},{categoryName:"douceur",title:"Nos Douceurs du Jour",icon:" /assets/icons/cupcake.png"},{categoryName:"vins",title:"Vins",tags:["Rouge","Blanc","Ros\xe9","50cl","75cl","Au Verre","Muscat"],icon:" /assets/icons/wine.png"},{categoryName:"champagnes",title:"Champagnes",tags:["Brut","Blanc de Blanc","Ros\xe9","75cl","La Coupe","La Piscine","Magnum"],icon:" /assets/icons/champagne.png"},{categoryName:"softs",title:"Softs",icon:" /assets/icons/soft-drink.png"},{categoryName:"cocktails",title:"Cocktails",tags:["Avec Alcool","Sans Alcool"],icon:" /assets/icons/cocktail.png"},{categoryName:"aperitifs",title:"Aperitifs",icon:" /assets/icons/aperitive.png"},{categoryName:"digestifs",title:"Digestifs",icon:" /assets/icons/cognac.svg"},{categoryName:"bieres",title:"Bi\xe8res",icon:" /assets/icons/beer.png"}],p="https://backend20h20.herokuapp.com",j=a(183),b=a(25),g=a(185),m=a(149),h=a(205),O=a(187),f=a(190),x=a(211),v=a(193),y=a(213),C=a(206),S=a(214),w=a(191),N=a(215),_=a(151),k=a(188),P=a(189),M=a(20),I=a.n(M),A=a(2),B=function(e){e.products;var t=e.setProducts,a=e.showAddProduct,i=e.setShowAddProduct,o=e.setOpenLoginModal,c=Object(d.h)(),r=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",padding:e.spacing(1)},formControl:{margin:e.spacing(1)},selectEmpty:{marginTop:e.spacing(2)},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)},input:{display:"none"}}}));function l(e,t,a){return{fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}}var M=Object(b.a)(),B={PaperProps:{style:{maxHeight:224,width:250}}},F=r(),D=Object(n.useState)(""),z=Object(s.a)(D,2),L=z[0],W=z[1],E=Object(n.useState)(""),T=Object(s.a)(E,2),R=T[0],U=T[1],q=Object(n.useState)(""),G=Object(s.a)(q,2),H=G[0],V=G[1],J=Object(n.useState)(""),Z=Object(s.a)(J,2),X=Z[0],Y=Z[1],K=Object(n.useState)([]),Q=Object(s.a)(K,2),$=Q[0],ee=Q[1],te=Object(n.useState)(""),ae=Object(s.a)(te,2),ne=ae[0],ie=ae[1],oe=function(e){ee(e.target.value)};return Object(n.useEffect)((function(){Y(c.category)}),[c]),Object(A.jsxs)(g.a,{children:[Object(A.jsx)(m.a,{style:{textAlign:"center"},variant:"h4",children:"Ajouter un Produit"}),Object(A.jsx)(h.a,{style:{display:"flex",justifyContent:"center"},children:Object(A.jsx)(O.a,{onClick:function(){return i(!a)},children:a?Object(A.jsx)(P.a,{fontSize:"large",style:{color:"red"}}):Object(A.jsx)(k.a,{fontSize:"large",style:{color:"green"}})})}),Object(A.jsx)(f.a,{in:a,children:Object(A.jsxs)("form",{className:F.root,onSubmit:function(e){e.preventDefault();var a=new FormData;a.append("title",L),a.append("description",R),a.append("price",H),a.append("category",X),a.append("tag",$||[]),a.append("image",ne);var n=localStorage.getItem("token20hvin");n?I()({method:"post",url:"".concat(p,"/api/products/createProduct"),data:a,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+n}}).then((function(e){t(e.data.data)})).then((function(){W(""),U(""),V(""),ee([]),ie("")})):o(!0)},encType:"multipart/form-data",children:[Object(A.jsx)(x.a,{id:"title",label:"Nom du produit",fullWidth:!0,value:L,onChange:function(e){return W(e.target.value)},required:!0}),Object(A.jsx)(x.a,{id:"description",fullWidth:!0,multiline:!0,label:"Description du produit",value:R,onChange:function(e){return U(e.target.value)},rows:4}),Object(A.jsx)(x.a,{id:"price",fullWidth:!0,label:"Prix du produit",required:!0,type:"number",InputProps:{inputProps:{min:0,step:.5}},value:H,onChange:function(e){return V(e.target.value)}}),Object(A.jsxs)(v.a,{className:F.formControl,fullWidth:!0,required:!0,children:[Object(A.jsx)(y.a,{id:"demo-simple-select-label",children:"Categorie"}),Object(A.jsx)(C.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:X,onChange:function(e){Y(e.target.value)},children:u.map((function(e){return Object(A.jsx)(S.a,{value:e.categoryName,children:e.title})}))})]}),u.map((function(e){return void 0!==e.tags&&e.categoryName===X&&Object(A.jsxs)(v.a,{className:F.formControl,fullWidth:!0,required:!0,children:[Object(A.jsx)(y.a,{id:"add-chip",children:"Tags"}),Object(A.jsx)(C.a,{labelId:"add-chip",id:"demo-mutiple-chip",multiple:!0,value:$,onChange:oe,input:Object(A.jsx)(w.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(A.jsx)("div",{className:F.chips,children:e.map((function(e){return Object(A.jsx)(N.a,{label:e,className:F.chip},e)}))})},MenuProps:B,children:u.map((function(e){return void 0!==e.tags&&e.categoryName===X&&e.tags.map((function(e){return Object(A.jsx)(S.a,{value:e,style:l(e,$,M),children:e},e)}))}))})]})})),Object(A.jsx)("input",{accept:"image/*",className:F.input,id:"addImage",files:ne,type:"file",onChange:function(e){return ie(e.target.files[0])}}),Object(A.jsx)("label",{htmlFor:"addImage",children:Object(A.jsx)(_.a,{fullWidth:!0,variant:"contained",color:"secondary",component:"span",style:{margin:"5px"},children:"Ajouter une image"})}),Object(A.jsx)(_.a,{fullWidth:!0,color:"primary",type:"submit",variant:"contained",children:"Ajouter un produit"})]})})]})},F=(a(142),function(e){var t=e.loading;return Object(n.useEffect)((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=document.querySelector(".wine-loader__wine__stop-1"),a=document.querySelector(".wine-loader__wine__stop-2"),n=.98,i=n/50,o=-1;window.setInterval((function(){var e=t.offset.baseVal;.98!=e.toFixed(2)&&0!=e.toFixed(2)||(o*=-1),t.setAttribute("offset",t.offset.baseVal+i*o),a.setAttribute("offset",a.offset.baseVal+i*o)}),e)}()}),[t]),Object(A.jsx)("div",{class:"wine-loader",children:Object(A.jsx)("div",{class:"wine__icon",children:Object(A.jsxs)("svg",{width:"103",height:"221",viewBox:"0 0 103 221",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(A.jsx)("ellipse",{class:"wine-loader__base",cx:"53.3448",cy:"211.131",rx:"29.0207",ry:"7.82862",fill:"#CFD8DE"}),Object(A.jsx)("path",{d:"M24.9364 211.214C27.6951 222.779 79.646 221.775 81.9479 211.214",stroke:"#BBC6CD"}),Object(A.jsx)("path",{class:"wine-loader__stem__line",d:"M45.2728 207.773C45.7034 208.026 49.3507 211.546 53.682 211.243C58.0132 210.939 60.926 208.862 61.8885 207.773",stroke:"#BBC6CD"}),Object(A.jsx)("path",{class:"wine-loader__stem",d:"M50.6965 182.111C50.8778 170.978 49.962 146.421 45.1195 138.867L52.1696 139.268C52.1696 139.268 62.3279 137.937 60.0944 138.327C57.8609 138.717 55.6702 160.724 55.9189 182.111C56.1178 199.22 59.9807 206.316 61.8873 207.725C59.732 210.295 53.3747 213.893 45.1873 207.725C49.9316 203.349 50.8369 188.825 50.6965 182.111Z",fill:"#D0E0EA"}),Object(A.jsx)("path",{class:"wine-loader__glass__shadow",d:"M59.4114 138.925C56.0309 139.499 48.3337 139.095 45.2942 139.095C46.5273 141.306 47.4156 144.254 47.7051 145.595H57.854C58.0003 144.461 58.5397 141.519 59.4114 138.925Z",fill:"url(#paint0_linear)","fill-opacity":"0.14"}),Object(A.jsx)("path",{class:"wine-loader__glass",d:"M102.699 107.453C102.39 90.0012 93.8088 39.3831 85.6992 7.45316H13.5996C6.10754 44.9654 -0.414182 90.3732 0.329871 107.453C1.07392 124.533 22.2793 139.414 52.4133 139.414C82.5473 139.414 103.009 124.905 102.699 107.453Z",fill:"url(#paint1_linear)"}),Object(A.jsx)("path",{d:"M96.7567 80.0351L5.09615 79.0666C5.09615 79.0666 3.13212 89.4363 3.84069 105.702C4.54926 121.967 23.7434 136.138 52.4403 136.138C81.1371 136.138 99.6227 122.321 99.328 105.702C99.0333 89.082 96.7567 80.0351 96.7567 80.0351Z",fill:"url(#paint3_linear)"}),Object(A.jsx)("path",{class:"wine-loader__shine--light",opacity:"0.3",d:"M32.5024 127.848C-7.72748 120.164 6.69586 94.7077 17.1336 14.617C26.1615 17.7811 31.8243 17.5551 34.0844 17.7811C30.4682 44.2243 23.8236 105.247 32.5024 127.848Z",fill:"url(#paint5_linear)"}),Object(A.jsxs)("defs",{children:[Object(A.jsxs)("linearGradient",{id:"paint0_linear",x1:"52.2767",y1:"139.286",x2:"52.2767",y2:"145.595",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{}),Object(A.jsx)("stop",{offset:"1","stop-opacity":"0"})]}),Object(A.jsxs)("linearGradient",{id:"paint1_linear",x1:"102.703",y1:"105.11",x2:"0.271844",y2:"105.11",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{"stop-color":"#BDC8CF"}),Object(A.jsx)("stop",{offset:"0.502762","stop-color":"#F6F9FC"}),Object(A.jsx)("stop",{offset:"1","stop-color":"#BDC8CF"})]}),Object(A.jsxs)("linearGradient",{id:"paint2_linear",x1:"13.5925",y1:"10.1636",x2:"85.6914",y2:"7.33961",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{"stop-color":"#E0F1FC"}),Object(A.jsx)("stop",{offset:"0.502762","stop-color":"#C5D7E2"}),Object(A.jsx)("stop",{offset:"1","stop-color":"#E0F1FC"})]}),Object(A.jsxs)("linearGradient",{id:"paint3_linear",x1:"51.509",y1:"77.6027",x2:"51.509",y2:"136.138",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{class:"wine-loader__wine__stop-1",offset:"0","stop-color":"transparent"}),Object(A.jsx)("stop",{class:"wine-loader__wine__stop-2",offset:"0.000001","stop-color":"#903A3A"}),Object(A.jsx)("stop",{class:"wine-loader__wine__stop-3",offset:".999999","stop-color":"#551B1B"}),Object(A.jsx)("stop",{class:"wine-loader__wine__stop-4",offset:"1","stop-color":"transparent"})]}),Object(A.jsxs)("linearGradient",{id:"paint4_linear",x1:"50.8837",y1:"73.5379",x2:"50.8837",y2:"86.4282",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{"stop-color":"#883A3A"}),Object(A.jsx)("stop",{offset:"1","stop-color":"#A14545"})]}),Object(A.jsxs)("linearGradient",{id:"paint5_linear",x1:"9.22325",y1:"74.5097",x2:"28.8862",y2:"75.6398",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{"stop-color":"white"}),Object(A.jsx)("stop",{offset:"0.690608","stop-color":"white","stop-opacity":"0"}),Object(A.jsx)("stop",{offset:"1","stop-color":"white","stop-opacity":"0"})]}),Object(A.jsxs)("linearGradient",{id:"paint6_linear",x1:"93.0295",y1:"75.5097",x2:"74.5723",y2:"76.5051",gradientUnits:"userSpaceOnUse",children:[Object(A.jsx)("stop",{}),Object(A.jsx)("stop",{offset:"0.690608","stop-opacity":"0"}),Object(A.jsx)("stop",{offset:"1","stop-opacity":"0"})]})]})]})})})}),D=a(195),z=a(196),L=a(197),W=a(198),E=a(199),T=a(200),R=a(208),U=a(210),q=a(209),G=function(e){var t=e.openEditProductImage,a=e.setOpenEditProductImage,i=e.product,o=e.setProducts,c=e.setLoading,r=e.setOpenLoginModal,l=Object(n.useState)(""),d=Object(s.a)(l,2),u=d[0],b=d[1],g=Object(n.useState)(""),m=Object(s.a)(g,2),h=m[0],O=m[1],f=Object(n.useState)(!1),x=Object(s.a)(f,2),v=x[0],y=x[1],C=Object(n.useState)(!1),S=Object(s.a)(C,2),w=(S[0],S[1]),N=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",padding:e.spacing(1)},modal:{marginTop:"50%"},input:{display:"none"}}}))();return Object(A.jsx)(R.a,{className:N.modal,open:t,onClose:function(){return a(!1)},children:Object(A.jsxs)("form",{className:N.root,onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("image",u);var n=localStorage.getItem("token20hvin");n?(c(!0),I()({method:"post",url:"".concat(p,"/api/products/updateProductImage/").concat(i._id,"/").concat(i.category),data:t,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+n}}).then((function(e){e&&200===e.data.status?(y(!1),o(e.data.data),O(e.data.message),setTimeout((function(){a(!1)}),2e3)):(y(!0),O(e.data.message))})).catch((function(e){return console.log(e)})).finally((function(){return c(!1)}))):(a(!1),r(!0))},children:[Object(A.jsx)(U.a,{open:!!h,autoHideDuration:5e3,onClose:function(){return w(!1)},children:Object(A.jsx)(q.a,{severity:v?"error":"success",onClose:function(){return w(!1)},children:h})}),Object(A.jsx)("input",{className:N.input,accept:"image/*",id:"updateImage",files:u,type:"file",onChange:function(e){b(e.target.files[0])}}),Object(A.jsx)("label",{htmlFor:"updateImage",children:Object(A.jsxs)(_.a,{type:"button",fullWidth:!0,variant:"contained",color:"secondary",component:"span",style:{margin:"5px"},children:["Modifier l'image de ",i.title]})}),u&&Object(A.jsxs)(_.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",style:{margin:"5px"},children:["Envoyer l'image pour ",i.title]})]})})},H=function(e){var t=e.openEditModal,a=e.setOpenEditModal,i=e.product,o=e.setProducts,c=e.setLoading,r=e.setOpenLoginModal,l=i.title,d=i.description,g=i.price,m=i.category,h=i.tag,O=Object(n.useState)(l),f=Object(s.a)(O,2),k=f[0],P=f[1],M=Object(n.useState)(d),B=Object(s.a)(M,2),F=B[0],D=B[1],z=Object(n.useState)(g),L=Object(s.a)(z,2),W=L[0],E=L[1],T=Object(n.useState)(m),U=Object(s.a)(T,2),q=U[0],G=U[1],H=Object(n.useState)(h),V=Object(s.a)(H,2),J=V[0],Z=V[1],X=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",padding:e.spacing(1)},modal:{marginTop:"50%"},formControl:{margin:e.spacing(1)},selectEmpty:{marginTop:e.spacing(2)},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)},input:{display:"none"}}}));function Y(e,t,a){return{fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}}var K=Object(b.a)(),Q={PaperProps:{style:{maxHeight:224,width:250}}},$=X(),ee=function(e){Z(e.target.value)};return Object(A.jsx)(R.a,{open:t,onClose:function(){return a(!1)},className:$.modal,children:Object(A.jsxs)("form",{className:$.root,onSubmit:function(e){e.preventDefault();var t=localStorage.getItem("token20hvin");if(t){c(!0);var n={};n.title=k||l,n.description=F,n.price=W||g,n.category=q||q,n.tag=J||h,n.visibility=i.visibility,I()({method:"post",url:"".concat(p,"/api/products/updateProduct"),data:{update:n,productId:i._id,productCategory:i.category},headers:{Authorization:"Bearer "+t}}).then((function(e){return o(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return c(!1)}))}else a(!1),r(!0)},children:[Object(A.jsx)(x.a,{id:"title",label:"Nom du produit",fullWidth:!0,value:k,onChange:function(e){return P(e.target.value)},required:!0}),Object(A.jsx)(x.a,{id:"description",fullWidth:!0,multiline:!0,label:"Description du produit",value:F,onChange:function(e){return D(e.target.value)},rows:4}),Object(A.jsx)(x.a,{id:"price",fullWidth:!0,label:"Prix du produit",required:!0,type:"number",InputProps:{inputProps:{min:0,step:.5}},value:W,onChange:function(e){return E(e.target.value)}}),Object(A.jsxs)(v.a,{className:$.formControl,fullWidth:!0,required:!0,children:[Object(A.jsx)(y.a,{id:"demo-simple-select-label",children:"Categorie"}),Object(A.jsx)(C.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:q,onChange:function(e){G(e.target.value)},children:u.map((function(e){return Object(A.jsx)(S.a,{value:e.categoryName,children:e.title},e)}))})]}),u.map((function(e){return void 0!==e.tags&&e.categoryName===q&&Object(A.jsxs)(v.a,{className:$.formControl,fullWidth:!0,required:!0,children:[Object(A.jsx)(y.a,{id:"edit-chip",children:"Tags"}),Object(A.jsx)(C.a,{labelId:"edit-chip",id:"demo-mutiple-chip",multiple:!0,value:J,onChange:ee,input:Object(A.jsx)(w.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(A.jsx)("div",{className:$.chips,children:e.map((function(e){return Object(A.jsx)(N.a,{label:e,className:$.chip},e)}))})},MenuProps:Q,children:u.map((function(e){return void 0!==e.tags&&e.categoryName===q&&e.tags.map((function(e){return Object(A.jsx)(S.a,{value:e,style:Y(e,J,K),children:e},e)}))}))})]})})),Object(A.jsxs)(_.a,{color:"primary",type:"submit",variant:"contained",children:["Editer le produit ","".concat(i.category," ").concat(i.title)]})]})})},V=function(e){var t,a=e.image,n=e.title,i=e.openProductImageModal,o=e.setOpenProductImageModal,c="data:".concat(null===a||void 0===a?void 0:a.contentType,";base64,"),r=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data);return Object(A.jsx)(R.a,{style:{marginTop:"50%"},open:i,onClose:function(){return o(!1)},children:Object(A.jsx)("img",{style:{width:"100%",objectFit:"cover"},src:c+r,alt:n})})},J=a(92),Z=a(93),X=function(e){var t=e.product,a=e.handleDeleteProduct,i=e.setProducts,o=e.setLoading,r=e.user,d=e.setOpenLoginModal,u=Object(n.useState)(!1),j=Object(s.a)(u,2),b=j[0],g=j[1],h=Object(n.useState)(!1),f=Object(s.a)(h,2),x=f[0],v=f[1],y=Object(n.useState)(!1),C=Object(s.a)(y,2),S=C[0],w=C[1];return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(H,{setOpenLoginModal:d,product:t,openEditModal:b,setOpenEditModal:g,setProducts:i,setLoading:o}),Object(A.jsx)(G,{product:t,setProducts:i,setLoading:o,openEditProductImage:S,setOpenEditProductImage:w,setOpenLoginModal:d}),Object(A.jsx)(V,Object(c.a)(Object(c.a)({},t),{},{openProductImageModal:x,setOpenProductImageModal:v})),"isAdmin"===r&&Object(A.jsxs)(D.a,{variant:"contained",size:"large",children:[Object(A.jsx)(O.a,{size:"medium",onClick:function(){return a(null===t||void 0===t?void 0:t._id,null===t||void 0===t?void 0:t.category)},children:Object(A.jsx)(P.a,{fontSize:"large",style:{color:"red",backgroundColor:"whitesmoke",borderRadius:"100%"}})}),Object(A.jsx)(O.a,{size:"medium",onClick:function(){var e=Object(c.a)({},t);e.visibility=!t.visibility;var a=localStorage.getItem("token20hvin");a?(o(!0),I()({method:"post",url:"".concat(p,"/api/products/updateProduct"),data:{update:e,productId:t._id,productCategory:t.category},headers:{Authorization:"Bearer "+a}}).then((function(e){return i(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return o(!1)}))):d(!0)},children:t&&!t.visibility?Object(A.jsx)(z.a,{fontSize:"large",style:{color:"grey",backgroundColor:"whitesmoke",borderRadius:"100%"}}):Object(A.jsx)(L.a,{fontSize:"large",style:{color:"grey",backgroundColor:"whitesmoke",borderRadius:"100%"}})}),Object(A.jsx)(O.a,{size:"medium",onClick:function(){return g(!0)},children:Object(A.jsx)(W.a,{fontSize:"large",style:{color:"green",backgroundColor:"whitesmoke",borderRadius:"100%"}})}),Object(A.jsx)(O.a,{size:"medium",onClick:function(){return w(!0)},children:Object(A.jsx)(E.a,{fontSize:"large",style:{color:"yellow",backgroundColor:"whitesmoke",borderRadius:"100%"}})})]}),("isAdmin"===r||(null===t||void 0===t?void 0:t.visibility))&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{style:{display:"flex",flexDirection:"row",flexGrow:1,marginBottom:2,marginTop:8},children:Object(A.jsxs)("div",{style:{display:"flex",flexGrow:1,alignSelf:"flex-start",justifyContent:"space-between"},children:[Object(A.jsxs)(m.a,{style:{borderBottom:"1px solid #FF3B2D",fontSize:"1.1em"},children:[(null===t||void 0===t?void 0:t.visibility)?null===t||void 0===t?void 0:t.title:"Cach\xe9 : ".concat(null===t||void 0===t?void 0:t.title),t.image&&Object(A.jsx)(O.a,{color:"inherit",onClick:function(){return v(!0)},children:Object(A.jsx)(T.a,{})})]}),Object(A.jsxs)(m.a,{variant:"body1",component:"span",children:[null===t||void 0===t?void 0:t.price.toFixed(2),"\u20ac"]})]})}),Object(A.jsx)(m.a,{variant:"body2",component:"p",style:{marginBottom:8,marginTop:3},children:Object(A.jsx)(l.a,{children:null===t||void 0===t?void 0:t.description})}),("vins"===(null===t||void 0===t?void 0:t.category)||"champagnes"===(null===t||void 0===t?void 0:t.category))&&(null===t||void 0===t?void 0:t.tag.map((function(e){return Object(A.jsxs)(m.a,{variant:"body2",component:"span",children:[" ","Rouge"===e&&"vins"===t.category||"Ros\xe9"===e&&"vins"===t.category||"Blanc"===e&&"vins"===t.category?Object(A.jsx)(J.a,{size:"2x",icon:Z.a,style:"Rouge"===e?{color:"#722f37"}:"Blanc"===e?{color:"#f1f285"}:"Ros\xe9"===e?{color:"#ee7272"}:{color:"inherit"}}):e," "]},(null===t||void 0===t?void 0:t.category)+e)})))]})]})},Y=a(6),K=a(201),Q=a(207),$=a(202),ee=function(e){var t=e.tags,a=e.setFilter,i=Object(n.useState)(0),o=Object(s.a)(i,2),r=o[0],l=o[1],d=Object(j.a)((function(e){return{root:{display:"flex",justifyContent:"center",margin:e.spacing(2),backgroundColor:"#202020"},appbar:{backgroundColor:"#202020"}}})),u=Object(Y.a)({indicator:{backgroundColor:"#FF3B2D"}})(Q.a),p=d(),b=function(e){return{id:"tagSelector-tab-".concat(e),"aria-controls":"tagSelector-tabpanel-".concat(e)}};return Object(A.jsx)("div",{className:p.root,children:(void 0!==t||t!==[])&&Object(A.jsx)(K.a,{position:"static",className:p.appbar,children:Object(A.jsxs)(u,{value:r,onChange:function(e,t){l(t)},"aria-label":"tag selector",variant:"scrollable",scrollButtons:"on",children:[Object(A.jsx)($.a,Object(c.a)({onClick:function(){return a("")},label:"Tout"},b(0)),"All"),t.map((function(e,t){return Object(A.jsx)($.a,Object(c.a)({onClick:function(){return a(e)},label:e},b(t)),"tag ".concat(e))}))]})})})},te=function(e){var t=e.product,a=e.products,i=e.setProducts,o=e.user,c=e.setOpenLoginModal,r=Object(n.useState)(!1),l=Object(s.a)(r,2),b=l[0],O=l[1],f=Object(d.h)().category,x=Object(n.useState)([]),v=Object(s.a)(x,2),y=v[0],C=v[1],S=Object(n.useState)(""),w=Object(s.a)(S,2),N=w[0],_=w[1],k=Object(n.useState)(a),P=Object(s.a)(k,2),M=P[0],B=P[1],D=Object(j.a)((function(e){return{titleWrapper:{display:"flex",justifyContent:"center"},title:{display:"inline",borderBottom:"2px solid #FF3B2D",margin:e.spacing(2)}}}))();Object(n.useEffect)((function(){B(""===N?a:function(e,t){return t?e.filter((function(e){return e.tag.includes(t)})):e}(a,N))}),[N,f,a]),Object(n.useEffect)((function(){_("");var e=u.filter((function(e){return e.categoryName===f}));C(e[0].tags),O(!0),I()({method:"get",url:"".concat(p,"/api/products/").concat(f)}).then((function(e){i(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return O(!1)}))}),[f]);var z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,a=localStorage.getItem("token20hvin");a?(O(!0),I()({method:"delete",url:"".concat(p,"/api/products/deleteProduct"),data:{productId:e,productCategory:t},headers:{Authorization:"Bearer "+a}}).then((function(e){return i(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return O(!1)}))):c(!0)},L=t.title,W=t.description1,E=t.description2,T=t.description3;return Object(A.jsxs)(g.a,{className:D.root,component:"div",children:[y&&Object(A.jsx)(ee,{tags:y,setFilter:_,products:a}),Object(A.jsxs)(g.a,{children:[!b&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(h.a,{component:"div",className:D.titleWrapper,children:Object(A.jsx)(m.a,{variant:"h4",component:"h2",className:D.title,children:L})}),Object(A.jsxs)(h.a,{component:"div",children:[Object(A.jsx)(m.a,{variant:"h6",component:"p",children:W}),Object(A.jsx)(m.a,{variant:"h6",component:"p",children:E}),Object(A.jsx)(m.a,{variant:"h6",component:"p",children:T})]}),M&&M.sort((function(e,t){return e.price-t.price})).map((function(e){return Object(A.jsx)(X,{product:e,handleDeleteProduct:z,setProducts:i,setLoading:O,user:o,setOpenLoginModal:c},null===e||void 0===e?void 0:e._id)}))]}),b&&Object(A.jsx)(F,{loading:b})]})]})},ae=function(e){var t=e.openLoginModal,a=e.setOpenLoginModal,i=e.setUser,o=Object(n.useState)(""),c=Object(s.a)(o,2),r=c[0],l=c[1],d=Object(n.useState)(""),u=Object(s.a)(d,2),b=u[0],h=u[1],O=Object(n.useState)(""),f=Object(s.a)(O,2),v=f[0],y=f[1],C=Object(n.useState)(!1),S=Object(s.a)(C,2),w=S[0],N=S[1],k=Object(n.useState)(!1),P=Object(s.a)(k,2),M=(P[0],P[1]),B=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",padding:e.spacing(1)},modal:{marginTop:"50%"},input:{margin:e.spacing(3)}}}))();return Object(A.jsx)(R.a,{className:B.modal,open:t,onClose:function(){return a(!1)},children:Object(A.jsxs)("form",{className:B.root,onSubmit:function(e){e.preventDefault(),I()({method:"post",url:"".concat(p,"/auth/login"),data:{email:r,password:b}}).then((function(e){e&&200===e.data.status?(N(!1),i(e.data.role),localStorage.setItem("token20hvin",e.data.token),y(e.data.message),setTimeout((function(){a(!1)}),5e3)):(N(!0),y(e.data.message))}))},children:[Object(A.jsx)(g.a,{style:{borderBottom:"1px solid black",textAlign:"center"},children:Object(A.jsx)(m.a,{variant:"h6",children:"Se connecter"})}),Object(A.jsx)(U.a,{open:!!v,autoHideDuration:5e3,onClose:function(){return M(!1)},children:Object(A.jsx)(q.a,{severity:w?"error":"success",onClose:function(){return M(!1)},children:v})}),Object(A.jsx)(x.a,{error:w,className:B.input,label:"Email",type:"email",value:r,onChange:function(e){return l(e.target.value)},required:!0,fullWidth:!0}),Object(A.jsx)(x.a,{error:w,className:B.input,label:"Mot de passe",type:"password",value:b,onChange:function(e){return h(e.target.value)},required:!0,fullWidth:!0}),Object(A.jsx)(_.a,{className:B.input,type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Se Connecter"})]})})},ne=a(203),ie=(a(145),function(){return Object(A.jsxs)(m.a,{className:"copyright",variant:"body2",align:"center",children:["Copyright \xa9 ",Object(A.jsx)(ne.a,{color:"inherit",href:"https://20h20.fr/",children:"Le 20HeuresVin"})," ",(new Date).getFullYear(),"."]})}),oe=a(47),ce=function(e){var t=e.setProduct,a=Object(j.a)((function(e){return{nav:{overflowX:"auto",padding:"8px 0px",display:"flex"},ul:{padding:"0px 8px",margin:"auto",display:"flex",alignItems:"flex-start",listStyle:"none"},li:{width:"80px",alignItems:"center",display:"flex",flexDirection:"column",position:"relative"},imgWrapper:{height:"60px",width:"60px",position:"relative"},image:{height:"100%",width:"100%"},span:{lineHeight:"16px",fontSize:"14px",textAlign:"center",width:"100%"}}}))();return"/"===Object(d.g)().pathname&&t("Antipasti"),Object(A.jsx)("nav",{className:a.nav,children:Object(A.jsx)("ul",{className:a.ul,children:u.map((function(e){return Object(A.jsx)(oe.c,{style:{textDecoration:"none",color:"inherit"},activeStyle:{padding:"4px",backgroundColor:"#202020",fontWeight:"bold",color:"#FF3B2D"},to:"/produits/".concat(e.categoryName),onClick:function(){return t(e)},children:Object(A.jsxs)("li",{className:a.li,children:[Object(A.jsx)("div",{className:a.imgWrapper,children:Object(A.jsx)("img",{className:a.image,src:e.icon,alt:e.categoryName})}),Object(A.jsx)("span",{className:a.span,children:e.title})]})},e.categoryName)}))})})},re=a(204),se=function(e){var t=e.setOpenLoginModal,a=e.user,n=Object(j.a)((function(e){return{root:{flexGrow:1,marginBottom:e.spacing(2),backgroundColor:"black",borderBottom:"1px solid #FF3B2D"},menuButton:{marginRight:e.spacing(2)},imageContainer:{flexGrow:1},image:{width:"150px",height:"75px"},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"}}}))();return Object(A.jsx)("div",{className:n.root,children:Object(A.jsx)(K.a,{position:"static",color:"transparent",children:Object(A.jsxs)(re.a,{children:[Object(A.jsx)("div",{className:n.imageContainer,children:Object(A.jsx)(oe.b,{to:"/",children:Object(A.jsx)("img",{src:" /assets/logo/20hvin.png",className:n.image,alt:"logo 20hvin"})})}),Object(A.jsx)(_.a,{color:"inherit",disabled:!!a,onClick:function(){return t(!0)},children:a?"Conn\xe9ct\xe9 !":"Me Connecter"})]})})})},le=(a(146),function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)([]),u=Object(s.a)(o,2),p=u[0],j=u[1],b=Object(n.useState)(!1),g=Object(s.a)(b,2),m=g[0],h=g[1],O=Object(n.useState)(""),f=Object(s.a)(O,2),x=f[0],v=f[1],y=Object(n.useState)(!1),C=Object(s.a)(y,2),S=C[0],w=C[1],N=navigator.language||navigator.userLanguage,_={get:function(e,t){return((JSON.parse(localStorage.getItem("translations"))||{})[t]||{})[e]},set:function(e,t,a){var n=JSON.parse(localStorage.getItem("translations"))||Object(r.a)({},t,{});n[t]=Object(c.a)(Object(c.a)({},n[t]),{},Object(r.a)({},e,a)),localStorage.setItem("translations",JSON.stringify(n))}};return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(l.b,{cacheProvider:_,from:"fr",to:N.substr(0,2),googleApiKey:"AIzaSyBlV19qRfHj05YOzkkavxXTS2HGx2D54Ps",children:Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)(se,{setOpenLoginModal:h,user:x}),Object(A.jsx)(ae,{openLoginModal:m,setUser:v,setOpenLoginModal:h}),Object(A.jsx)(ce,{setProduct:i}),Object(A.jsxs)(d.d,{children:[Object(A.jsx)(d.b,{exact:!0,path:"/",children:Object(A.jsx)(d.a,{to:"/produits/antipasti"})}),Object(A.jsxs)(d.b,{path:"/produits/:category",children:["isAdmin"===x&&Object(A.jsx)(B,{showAddProduct:S,setShowAddProduct:w,products:p,setProducts:j,setOpenLoginModal:h}),Object(A.jsx)(te,{products:p,setProducts:j,product:a,user:x,setOpenLoginModal:h})]})]})]})}),Object(A.jsx)(ie,{})]})}),de=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,217)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),i(e),o(e),c(e)}))};o.a.render(Object(A.jsx)(oe.a,{basename:"/",children:Object(A.jsx)(le,{})}),document.getElementById("root")),de()}},[[147,1,2]]]);
//# sourceMappingURL=main.6b0ec599.chunk.js.map