(this["webpackJsonp20hvin-v2-frontend"]=this["webpackJsonp20hvin-v2-frontend"]||[]).push([[0],{108:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(14),i=a.n(o),c=(a(108),a(24)),r=a(55),s=a(8),l=a(64),d=a(13),u=[{categoryName:"suggestions",title:"Suggestions",icon:" /assets/icons/suggestions.png"},{categoryName:"pizzas",title:"Pizzas",tags:["Rouge","Blanche"],icon:" /assets/icons/pizza.png"},{categoryName:"pasta",title:"La Pasta",icon:" /assets/icons/spaguetti.png"},{categoryName:"menu-enfant",title:"Menu Enfant",icon:" /assets/icons/girl.png"},{categoryName:"cote-mer",title:"Cot\xe9 Mer",icon:" /assets/icons/fish.png"},{categoryName:"pizzas-sucrees",title:"Pizzas sucr\xe9es",icon:" /assets/icons/pizza-nutella.png"},{categoryName:"antipasti",title:"Antipasti",icon:" /assets/icons/antipasto.png"},{categoryName:"douceur",title:"Nos Douceurs du Jour",icon:" /assets/icons/cupcake.png"},{categoryName:"vins",title:"Vins",tags:["Rouge","Blanc","Ros\xe9","50cl","75cl","Au Verre","Magnum","Muscat"],icon:" /assets/icons/wine.png"},{categoryName:"champagnes",title:"Champagnes",tags:["Brut","Blanc de Blanc","Ros\xe9","75cl","La Coupe","La Piscine","Magnum"],icon:" /assets/icons/champagne.png"},{categoryName:"softs",title:"Softs",icon:" /assets/icons/soft-drink.png"},{categoryName:"cocktails",title:"Cocktails",tags:["Avec Alcool","Sans Alcool"],icon:" /assets/icons/cocktail.png"},{categoryName:"aperitifs",title:"Aperitifs",icon:" /assets/icons/aperitive.png"},{categoryName:"digestifs",title:"Digestifs",icon:" /assets/icons/cognac.svg"},{categoryName:"bieres",title:"Bi\xe8res",icon:" /assets/icons/beer.png"}],p="https://backend20h20.herokuapp.com",j=a(178),g=a(26),b=a(180),m=a(144),f=a(200),O=a(182),h=a(185),x=a(206),y=a(188),v=a(208),C=a(201),S=a(209),w=a(186),N=a(210),_=a(146),k=a(183),P=a(184),M=a(20),I=a.n(M),F=a(2),A=function(e){e.products;var t=e.setProducts,a=e.showAddProduct,o=e.setShowAddProduct,i=e.setOpenLoginModal,c=Object(d.h)(),r=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",padding:e.spacing(1)},formControl:{margin:e.spacing(1)},selectEmpty:{marginTop:e.spacing(2)},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)},input:{display:"none"}}}));function l(e,t,a){return{fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}}var M=Object(g.a)(),A={PaperProps:{style:{maxHeight:224,width:250}}},B=r(),D=Object(n.useState)(""),z=Object(s.a)(D,2),L=z[0],W=z[1],E=Object(n.useState)(""),T=Object(s.a)(E,2),U=T[0],q=T[1],R=Object(n.useState)(""),G=Object(s.a)(R,2),H=G[0],V=G[1],J=Object(n.useState)(""),Z=Object(s.a)(J,2),X=Z[0],Y=Z[1],K=Object(n.useState)([]),Q=Object(s.a)(K,2),$=Q[0],ee=Q[1],te=Object(n.useState)(""),ae=Object(s.a)(te,2),ne=ae[0],oe=ae[1],ie=function(e){ee(e.target.value)};return Object(n.useEffect)((function(){Y(c.category)}),[c]),Object(F.jsxs)(b.a,{children:[Object(F.jsx)(m.a,{style:{textAlign:"center"},variant:"h4",children:"Ajouter un Produit"}),Object(F.jsx)(f.a,{style:{display:"flex",justifyContent:"center"},children:Object(F.jsx)(O.a,{onClick:function(){return o(!a)},children:a?Object(F.jsx)(P.a,{fontSize:"large",style:{color:"red"}}):Object(F.jsx)(k.a,{fontSize:"large",style:{color:"green"}})})}),Object(F.jsx)(h.a,{in:a,children:Object(F.jsxs)("form",{className:B.root,onSubmit:function(e){e.preventDefault();var a=new FormData;a.append("title",L),a.append("description",U),a.append("price",H),a.append("category",X),a.append("tag",$||[]),a.append("image",ne);var n=localStorage.getItem("token20hvin");n?I()({method:"post",url:"".concat(p,"/api/products/createProduct"),data:a,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+n}}).then((function(e){t(e.data.data)})).then((function(){W(""),q(""),V(""),ee([]),oe("")})):i(!0)},encType:"multipart/form-data",children:[Object(F.jsx)(x.a,{id:"title",label:"Nom du produit",fullWidth:!0,value:L,onChange:function(e){return W(e.target.value)},required:!0}),Object(F.jsx)(x.a,{id:"description",fullWidth:!0,multiline:!0,label:"Description du produit",value:U,onChange:function(e){return q(e.target.value)},rows:4}),Object(F.jsx)(x.a,{id:"price",fullWidth:!0,label:"Prix du produit",required:!0,type:"number",InputProps:{inputProps:{min:0,step:.5}},value:H,onChange:function(e){return V(e.target.value)}}),Object(F.jsxs)(y.a,{className:B.formControl,fullWidth:!0,required:!0,children:[Object(F.jsx)(v.a,{id:"demo-simple-select-label",children:"Categorie"}),Object(F.jsx)(C.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:X,onChange:function(e){Y(e.target.value)},children:u.map((function(e){return Object(F.jsx)(S.a,{value:e.categoryName,children:e.title})}))})]}),u.map((function(e){return void 0!==e.tags&&e.categoryName===X&&Object(F.jsxs)(y.a,{className:B.formControl,fullWidth:!0,required:!0,children:[Object(F.jsx)(v.a,{id:"demo-mutiple-chip-label",children:"Tags"}),Object(F.jsx)(C.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",multiple:!0,value:$,onChange:ie,input:Object(F.jsx)(w.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(F.jsx)("div",{className:B.chips,children:e.map((function(e){return Object(F.jsx)(N.a,{label:e,className:B.chip},e)}))})},MenuProps:A,children:u.map((function(e){return void 0!==e.tags&&e.categoryName===X&&e.tags.map((function(e){return Object(F.jsx)(S.a,{value:e,style:l(e,$,M),children:e},e)}))}))})]})})),Object(F.jsx)("input",{accept:"image/*",className:B.input,id:"addImage",files:ne,type:"file",onChange:function(e){return oe(e.target.files[0])}}),Object(F.jsx)("label",{htmlFor:"addImage",children:Object(F.jsx)(_.a,{fullWidth:!0,variant:"contained",color:"secondary",component:"span",style:{margin:"5px"},children:"Ajouter une image"})}),Object(F.jsx)(_.a,{fullWidth:!0,color:"primary",type:"submit",variant:"contained",children:"Ajouter un produit"})]})})]})},B=(a(139),function(e){var t=e.loading;return Object(n.useEffect)((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=document.querySelector(".wine-loader__wine__stop-1"),a=document.querySelector(".wine-loader__wine__stop-2"),n=.98,o=n/50,i=-1;window.setInterval((function(){var e=t.offset.baseVal;.98!=e.toFixed(2)&&0!=e.toFixed(2)||(i*=-1),t.setAttribute("offset",t.offset.baseVal+o*i),a.setAttribute("offset",a.offset.baseVal+o*i)}),e)}()}),[t]),Object(F.jsx)("div",{class:"wine-loader",children:Object(F.jsx)("div",{class:"wine__icon",children:Object(F.jsxs)("svg",{width:"103",height:"221",viewBox:"0 0 103 221",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(F.jsx)("ellipse",{class:"wine-loader__base",cx:"53.3448",cy:"211.131",rx:"29.0207",ry:"7.82862",fill:"#CFD8DE"}),Object(F.jsx)("path",{d:"M24.9364 211.214C27.6951 222.779 79.646 221.775 81.9479 211.214",stroke:"#BBC6CD"}),Object(F.jsx)("path",{class:"wine-loader__stem__line",d:"M45.2728 207.773C45.7034 208.026 49.3507 211.546 53.682 211.243C58.0132 210.939 60.926 208.862 61.8885 207.773",stroke:"#BBC6CD"}),Object(F.jsx)("path",{class:"wine-loader__stem",d:"M50.6965 182.111C50.8778 170.978 49.962 146.421 45.1195 138.867L52.1696 139.268C52.1696 139.268 62.3279 137.937 60.0944 138.327C57.8609 138.717 55.6702 160.724 55.9189 182.111C56.1178 199.22 59.9807 206.316 61.8873 207.725C59.732 210.295 53.3747 213.893 45.1873 207.725C49.9316 203.349 50.8369 188.825 50.6965 182.111Z",fill:"#D0E0EA"}),Object(F.jsx)("path",{class:"wine-loader__glass__shadow",d:"M59.4114 138.925C56.0309 139.499 48.3337 139.095 45.2942 139.095C46.5273 141.306 47.4156 144.254 47.7051 145.595H57.854C58.0003 144.461 58.5397 141.519 59.4114 138.925Z",fill:"url(#paint0_linear)","fill-opacity":"0.14"}),Object(F.jsx)("path",{class:"wine-loader__glass",d:"M102.699 107.453C102.39 90.0012 93.8088 39.3831 85.6992 7.45316H13.5996C6.10754 44.9654 -0.414182 90.3732 0.329871 107.453C1.07392 124.533 22.2793 139.414 52.4133 139.414C82.5473 139.414 103.009 124.905 102.699 107.453Z",fill:"url(#paint1_linear)"}),Object(F.jsx)("path",{d:"M96.7567 80.0351L5.09615 79.0666C5.09615 79.0666 3.13212 89.4363 3.84069 105.702C4.54926 121.967 23.7434 136.138 52.4403 136.138C81.1371 136.138 99.6227 122.321 99.328 105.702C99.0333 89.082 96.7567 80.0351 96.7567 80.0351Z",fill:"url(#paint3_linear)"}),Object(F.jsx)("path",{class:"wine-loader__shine--light",opacity:"0.3",d:"M32.5024 127.848C-7.72748 120.164 6.69586 94.7077 17.1336 14.617C26.1615 17.7811 31.8243 17.5551 34.0844 17.7811C30.4682 44.2243 23.8236 105.247 32.5024 127.848Z",fill:"url(#paint5_linear)"}),Object(F.jsxs)("defs",{children:[Object(F.jsxs)("linearGradient",{id:"paint0_linear",x1:"52.2767",y1:"139.286",x2:"52.2767",y2:"145.595",gradientUnits:"userSpaceOnUse",children:[Object(F.jsx)("stop",{}),Object(F.jsx)("stop",{offset:"1","stop-opacity":"0"})]}),Object(F.jsxs)("linearGradient",{id:"paint1_linear",x1:"102.703",y1:"105.11",x2:"0.271844",y2:"105.11",gradientUnits:"userSpaceOnUse",children:[Object(F.jsx)("stop",{"stop-color":"#BDC8CF"}),Object(F.jsx)("stop",{offset:"0.502762","stop-color":"#F6F9FC"}),Object(F.jsx)("stop",{offset:"1","stop-color":"#BDC8CF"})]}),Object(F.jsxs)("linearGradient",{id:"paint2_linear",x1:"13.5925",y1:"10.1636",x2:"85.6914",y2:"7.33961",gradientUnits:"userSpaceOnUse",children:[Object(F.jsx)("stop",{"stop-color":"#E0F1FC"}),Object(F.jsx)("stop",{offset:"0.502762","stop-color":"#C5D7E2"}),Object(F.jsx)("stop",{offset:"1","stop-color":"#E0F1FC"})]}),Object(F.jsxs)("linearGradient",{id:"paint3_linear",x1:"51.509",y1:"77.6027",x2:"51.509",y2:"136.138",gradientUnits:"userSpaceOnUse",children:[Object(F.jsx)("stop",{class:"wine-loader__wine__stop-1",offset:"0","stop-color":"transparent"}),Object(F.jsx)("stop",{class:"wine-loader__wine__stop-2",offset:"0.000001","stop-color":"#903A3A"}),Object(F.jsx)("stop",{class:"wine-loader__wine__stop-3",offset:".999999","stop-color":"#551B1B"}),Object(F.jsx)("stop",{class:"wine-loader__wine__stop-4",offset:"1","stop-color":"transparent"})]}),Object(F.jsxs)("linearGradient",{id:"paint4_linear",x1:"50.8837",y1:"73.5379",x2:"50.8837",y2:"86.4282",gradientUnits:"userSpaceOnUse",children:[Object(F.jsx)("stop",{"stop-color":"#883A3A"}),Object(F.jsx)("stop",{offset:"1","stop-color":"#A14545"})]}),Object(F.jsxs)("linearGradient",{id:"paint5_linear",x1:"9.22325",y1:"74.5097",x2:"28.8862",y2:"75.6398",gradientUnits:"userSpaceOnUse",children:[Object(F.jsx)("stop",{"stop-color":"white"}),Object(F.jsx)("stop",{offset:"0.690608","stop-color":"white","stop-opacity":"0"}),Object(F.jsx)("stop",{offset:"1","stop-color":"white","stop-opacity":"0"})]}),Object(F.jsxs)("linearGradient",{id:"paint6_linear",x1:"93.0295",y1:"75.5097",x2:"74.5723",y2:"76.5051",gradientUnits:"userSpaceOnUse",children:[Object(F.jsx)("stop",{}),Object(F.jsx)("stop",{offset:"0.690608","stop-opacity":"0"}),Object(F.jsx)("stop",{offset:"1","stop-opacity":"0"})]})]})]})})})}),D=a(190),z=a(191),L=a(192),W=a(193),E=a(194),T=a(195),U=a(203),q=a(205),R=a(204),G=function(e){var t=e.openEditProductImage,a=e.setOpenEditProductImage,o=e.product,i=e.setProducts,c=e.setLoading,r=e.setOpenLoginModal,l=Object(n.useState)(""),d=Object(s.a)(l,2),u=d[0],g=d[1],b=Object(n.useState)(""),m=Object(s.a)(b,2),f=m[0],O=m[1],h=Object(n.useState)(!1),x=Object(s.a)(h,2),y=x[0],v=x[1],C=Object(n.useState)(!1),S=Object(s.a)(C,2),w=(S[0],S[1]),N=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",padding:e.spacing(1)},modal:{marginTop:"50%"},input:{display:"none"}}}))();return Object(F.jsx)(U.a,{className:N.modal,open:t,onClose:function(){return a(!1)},children:Object(F.jsxs)("form",{className:N.root,onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("image",u);var n=localStorage.getItem("token20hvin");n?(c(!0),I()({method:"post",url:"".concat(p,"/api/products/updateProductImage/").concat(o._id,"/").concat(o.category),data:t,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+n}}).then((function(e){e&&200===e.data.status?(v(!1),i(e.data.data),O(e.data.message),setTimeout((function(){a(!1)}),2e3)):(v(!0),O(e.data.message))})).catch((function(e){return console.log(e)})).finally((function(){return c(!1)}))):(a(!1),r(!0))},children:[Object(F.jsx)(q.a,{open:!!f,autoHideDuration:5e3,onClose:function(){return w(!1)},children:Object(F.jsx)(R.a,{severity:y?"error":"success",onClose:function(){return w(!1)},children:f})}),Object(F.jsx)("input",{className:N.input,accept:"image/*",id:"updateImage",files:u,type:"file",onChange:function(e){g(e.target.files[0])}}),Object(F.jsx)("label",{htmlFor:"updateImage",children:Object(F.jsxs)(_.a,{type:"button",fullWidth:!0,variant:"contained",color:"secondary",component:"span",style:{margin:"5px"},children:["Modifier l'image de ",o.title]})}),u&&Object(F.jsxs)(_.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",style:{margin:"5px"},children:["Envoyer l'image pour ",o.title]})]})})},H=function(e){var t=e.openEditModal,a=e.setOpenEditModal,o=e.product,i=e.setProducts,r=e.setLoading,l=e.setOpenLoginModal,d=o.title,b=o.description,m=o.price,f=o.category,O=o.tag,h=Object(n.useState)(d),k=Object(s.a)(h,2),P=k[0],M=k[1],A=Object(n.useState)(b),B=Object(s.a)(A,2),D=B[0],z=B[1],L=Object(n.useState)(m),W=Object(s.a)(L,2),E=W[0],T=W[1],q=Object(n.useState)(f),R=Object(s.a)(q,2),G=R[0],H=R[1],V=Object(n.useState)(O),J=Object(s.a)(V,2),Z=J[0],X=J[1],Y=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",padding:e.spacing(1)},modal:{marginTop:"50%"},formControl:{margin:e.spacing(1)},selectEmpty:{marginTop:e.spacing(2)},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)},input:{display:"none"}}}));function K(e,t,a){return{fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}}var Q=Object(g.a)(),$={PaperProps:{style:{maxHeight:224,width:250}}},ee=Y(),te=function(e){X(e.target.value)};return Object(F.jsx)(U.a,{open:t,onClose:function(){return a(!1)},className:ee.modal,children:Object(F.jsxs)("form",{className:ee.root,onSubmit:function(e){e.preventDefault();var t=localStorage.getItem("token20hvin");if(t){r(!0);var n=Object(c.a)({},o);n.title=P||d,n.description=D,n.price=E||m,n.category=G||G,n.tag=Z||O,n.visibility=o.visibility,I()({method:"post",url:"".concat(p,"/api/products/updateProduct"),data:{update:n,productId:o._id,productCategory:o.category},headers:{Authorization:"Bearer "+t}}).then((function(e){return i(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return r(!1)}))}else a(!1),l(!0)},children:[Object(F.jsx)(x.a,{id:"title",label:"Nom du produit",fullWidth:!0,value:P,onChange:function(e){return M(e.target.value)},required:!0}),Object(F.jsx)(x.a,{id:"description",fullWidth:!0,multiline:!0,label:"Description du produit",value:D,onChange:function(e){return z(e.target.value)},rows:4}),Object(F.jsx)(x.a,{id:"price",fullWidth:!0,label:"Prix du produit",required:!0,type:"number",InputProps:{inputProps:{min:0,step:.5}},value:E,onChange:function(e){return T(e.target.value)}}),Object(F.jsxs)(y.a,{className:ee.formControl,fullWidth:!0,required:!0,children:[Object(F.jsx)(v.a,{id:"demo-simple-select-label",children:"Categorie"}),Object(F.jsx)(C.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:G,onChange:function(e){H(e.target.value)},children:u.map((function(e){return Object(F.jsx)(S.a,{value:e.categoryName,children:e.title},e)}))})]}),u.map((function(e){return void 0!==e.tags&&e.categoryName===G&&Object(F.jsxs)(y.a,{className:ee.formControl,fullWidth:!0,required:!0,children:[Object(F.jsx)(v.a,{id:"demo-mutiple-chip-label",children:"Tags"}),Object(F.jsx)(C.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",multiple:!0,value:Z,onChange:te,input:Object(F.jsx)(w.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(F.jsx)("div",{className:ee.chips,children:e.map((function(e){return Object(F.jsx)(N.a,{label:e,className:ee.chip},e)}))})},MenuProps:$,children:u.map((function(e){return void 0!==e.tags&&e.categoryName===G&&e.tags.map((function(e){return Object(F.jsx)(S.a,{value:e,style:K(e,Z,Q),children:e},e)}))}))})]})})),Object(F.jsxs)(_.a,{color:"primary",type:"submit",variant:"contained",children:["Editer le produit ","".concat(o.category," ").concat(o.title)]})]})})},V=function(e){var t,a=e.image,n=e.title,o=e.openProductImageModal,i=e.setOpenProductImageModal,c="data:".concat(null===a||void 0===a?void 0:a.contentType,";base64,"),r=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data);return Object(F.jsx)(U.a,{style:{marginTop:"50%"},open:o,onClose:function(){return i(!1)},children:Object(F.jsx)("img",{style:{width:"100%",objectFit:"cover"},src:c+r,alt:n})})},J=function(e){var t=e.product,a=e.handleDeleteProduct,o=e.setProducts,i=e.setLoading,r=e.user,d=e.setOpenLoginModal,u=Object(n.useState)(!1),j=Object(s.a)(u,2),g=j[0],b=j[1],f=Object(n.useState)(!1),h=Object(s.a)(f,2),x=h[0],y=h[1],v=Object(n.useState)(!1),C=Object(s.a)(v,2),S=C[0],w=C[1];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(H,{setOpenLoginModal:d,product:t,openEditModal:g,setOpenEditModal:b,setProducts:o,setLoading:i}),Object(F.jsx)(G,{product:t,setProducts:o,setLoading:i,openEditProductImage:S,setOpenEditProductImage:w,setOpenLoginModal:d}),Object(F.jsx)(V,Object(c.a)(Object(c.a)({},t),{},{openProductImageModal:x,setOpenProductImageModal:y})),"isAdmin"===r&&Object(F.jsxs)(D.a,{variant:"contained",size:"large",children:[Object(F.jsx)(O.a,{size:"medium",onClick:function(){return a(null===t||void 0===t?void 0:t._id,null===t||void 0===t?void 0:t.category)},children:Object(F.jsx)(P.a,{fontSize:"large",style:{color:"red",backgroundColor:"whitesmoke",borderRadius:"100%"}})}),Object(F.jsx)(O.a,{size:"medium",onClick:function(){var e=Object(c.a)({},t);e.visibility=!t.visibility;var a=localStorage.getItem("token20hvin");a?(i(!0),I()({method:"post",url:"".concat(p,"/api/products/updateProduct"),data:{update:e,productId:t._id,productCategory:t.category},headers:{Authorization:"Bearer "+a}}).then((function(e){return o(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return i(!1)}))):d(!0)},children:t&&!t.visibility?Object(F.jsx)(z.a,{fontSize:"large",style:{color:"grey",backgroundColor:"whitesmoke",borderRadius:"100%"}}):Object(F.jsx)(L.a,{fontSize:"large",style:{color:"grey",backgroundColor:"whitesmoke",borderRadius:"100%"}})}),Object(F.jsx)(O.a,{size:"medium",onClick:function(){return b(!0)},children:Object(F.jsx)(W.a,{fontSize:"large",style:{color:"green",backgroundColor:"whitesmoke",borderRadius:"100%"}})}),Object(F.jsx)(O.a,{size:"medium",onClick:function(){return w(!0)},children:Object(F.jsx)(E.a,{fontSize:"large",style:{color:"yellow",backgroundColor:"whitesmoke",borderRadius:"100%"}})})]}),("isAdmin"===r||(null===t||void 0===t?void 0:t.visibility))&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{style:{display:"flex",flexDirection:"row",flexGrow:1,marginBottom:2,marginTop:8},children:Object(F.jsxs)("div",{style:{display:"flex",flexGrow:1,alignSelf:"flex-start",justifyContent:"space-between"},children:[Object(F.jsxs)(m.a,{style:{borderBottom:"1px solid #FF3B2D",fontSize:"1.1em"},children:[(null===t||void 0===t?void 0:t.visibility)?null===t||void 0===t?void 0:t.title:"Cach\xe9 : ".concat(null===t||void 0===t?void 0:t.title),t.image&&Object(F.jsx)(O.a,{color:"inherit",onClick:function(){return y(!0)},children:Object(F.jsx)(T.a,{})})]}),Object(F.jsxs)(m.a,{variant:"body1",component:"span",children:[null===t||void 0===t?void 0:t.price.toFixed(2),"\u20ac"]})]})}),Object(F.jsx)(m.a,{variant:"body2",component:"p",style:{marginBottom:8,marginTop:3},children:Object(F.jsx)(l.a,{children:null===t||void 0===t?void 0:t.description})}),("vins"===(null===t||void 0===t?void 0:t.category)||"champagnes"===(null===t||void 0===t?void 0:t.category))&&(null===t||void 0===t?void 0:t.tag.map((function(e){return Object(F.jsx)(m.a,{variant:"body2",component:"span",children:" ".concat(e," ")},(null===t||void 0===t?void 0:t.category)+e)})))]})]})},Z=a(5),X=a(196),Y=a(202),K=a(197),Q=function(e){var t=e.tags,a=e.setFilter,o=Object(n.useState)(0),i=Object(s.a)(o,2),r=i[0],l=i[1],d=Object(j.a)((function(e){return{root:{display:"flex",justifyContent:"center",margin:e.spacing(2),backgroundColor:"#202020"},appbar:{backgroundColor:"#202020"}}})),u=Object(Z.a)({indicator:{backgroundColor:"#FF3B2D"}})(Y.a),p=d(),g=function(e){return{id:"tagSelector-tab-".concat(e),"aria-controls":"tagSelector-tabpanel-".concat(e)}};return Object(F.jsx)("div",{className:p.root,children:(void 0!==t||t!==[])&&Object(F.jsx)(X.a,{position:"static",className:p.appbar,children:Object(F.jsxs)(u,{value:r,onChange:function(e,t){l(t)},"aria-label":"tag selector",variant:"scrollable",scrollButtons:"on",children:[Object(F.jsx)(K.a,Object(c.a)({onClick:function(){return a("")},label:"Tout"},g(0)),"All"),t.map((function(e,t){return Object(F.jsx)(K.a,Object(c.a)({onClick:function(){return a(e)},label:e},g(t)),"tag ".concat(e))}))]})})})},$=function(e){var t=e.product,a=e.products,o=e.setProducts,i=e.user,c=e.setOpenLoginModal,r=Object(n.useState)(!1),l=Object(s.a)(r,2),g=l[0],O=l[1],h=Object(d.h)().category,x=Object(n.useState)([]),y=Object(s.a)(x,2),v=y[0],C=y[1],S=Object(n.useState)(""),w=Object(s.a)(S,2),N=w[0],_=w[1],k=Object(n.useState)(a),P=Object(s.a)(k,2),M=P[0],A=P[1],D=Object(j.a)((function(e){return{titleWrapper:{display:"flex",justifyContent:"center"},title:{display:"inline",borderBottom:"2px solid #FF3B2D",margin:e.spacing(2)}}}))();Object(n.useEffect)((function(){A(""===N?a:function(e,t){return t?e.filter((function(e){return e.tag.includes(t)})):e}(a,N))}),[N,h,a]),Object(n.useEffect)((function(){_("");var e=u.filter((function(e){return e.categoryName===h}));C(e[0].tags),O(!0),I()({method:"get",url:"".concat(p,"/api/products/").concat(h)}).then((function(e){o(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return O(!1)}))}),[h]);var z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,a=localStorage.getItem("token20hvin");a?(O(!0),I()({method:"delete",url:"".concat(p,"/api/products/deleteProduct"),data:{productId:e,productCategory:t},headers:{Authorization:"Bearer "+a}}).then((function(e){return o(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return O(!1)}))):c(!0)};return Object(F.jsxs)(b.a,{className:D.root,component:"div",children:[v&&Object(F.jsx)(Q,{tags:v,setFilter:_,products:a}),Object(F.jsxs)(b.a,{children:[!g&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(f.a,{component:"div",className:D.titleWrapper,children:Object(F.jsx)(m.a,{variant:"h4",component:"h2",className:D.title,children:t})}),M&&M.sort((function(e,t){return t.price-e.price})).map((function(e){return Object(F.jsx)(J,{product:e,handleDeleteProduct:z,setProducts:o,setLoading:O,user:i,setOpenLoginModal:c},null===e||void 0===e?void 0:e._id)}))]}),g&&Object(F.jsx)(B,{loading:g})]})]})},ee=function(e){var t=e.openLoginModal,a=e.setOpenLoginModal,o=e.setUser,i=Object(n.useState)(""),c=Object(s.a)(i,2),r=c[0],l=c[1],d=Object(n.useState)(""),u=Object(s.a)(d,2),g=u[0],f=u[1],O=Object(n.useState)(""),h=Object(s.a)(O,2),y=h[0],v=h[1],C=Object(n.useState)(!1),S=Object(s.a)(C,2),w=S[0],N=S[1],k=Object(n.useState)(!1),P=Object(s.a)(k,2),M=(P[0],P[1]),A=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",padding:e.spacing(1)},modal:{marginTop:"50%"},input:{margin:e.spacing(3)}}}))();return Object(F.jsx)(U.a,{className:A.modal,open:t,onClose:function(){return a(!1)},children:Object(F.jsxs)("form",{className:A.root,onSubmit:function(e){e.preventDefault(),I()({method:"post",url:"".concat(p,"/auth/login"),data:{email:r,password:g}}).then((function(e){e&&200===e.data.status?(N(!1),o(e.data.role),localStorage.setItem("token20hvin",e.data.token),v(e.data.message),setTimeout((function(){a(!1)}),5e3)):(N(!0),v(e.data.message))}))},children:[Object(F.jsx)(b.a,{style:{borderBottom:"1px solid black",textAlign:"center"},children:Object(F.jsx)(m.a,{variant:"h6",children:"Se connecter"})}),Object(F.jsx)(q.a,{open:!!y,autoHideDuration:5e3,onClose:function(){return M(!1)},children:Object(F.jsx)(R.a,{severity:w?"error":"success",onClose:function(){return M(!1)},children:y})}),Object(F.jsx)(x.a,{error:w,className:A.input,label:"Email",type:"email",value:r,onChange:function(e){return l(e.target.value)},required:!0,fullWidth:!0}),Object(F.jsx)(x.a,{error:w,className:A.input,label:"Mot de passe",type:"password",value:g,onChange:function(e){return f(e.target.value)},required:!0,fullWidth:!0}),Object(F.jsx)(_.a,{className:A.input,type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Se Connecter"})]})})},te=a(198),ae=(a(140),function(){return Object(F.jsxs)(m.a,{className:"copyright",variant:"body2",align:"center",children:["Copyright \xa9 ",Object(F.jsx)(te.a,{color:"inherit",href:"https://20h20.fr/",children:"Le 20HeuresVin"})," ",(new Date).getFullYear(),"."]})}),ne=a(47),oe=function(e){var t=e.setProduct,a=Object(j.a)((function(e){return{nav:{overflowX:"auto",padding:"8px 0px",display:"flex"},ul:{padding:"0px 8px",margin:"auto",display:"flex",alignItems:"flex-start",listStyle:"none"},li:{width:"80px",alignItems:"center",display:"flex",flexDirection:"column",position:"relative"},imgWrapper:{height:"60px",width:"60px",position:"relative"},image:{height:"100%",width:"100%"},span:{lineHeight:"16px",fontSize:"14px",textAlign:"center",width:"100%"}}}))();return"/"===Object(d.g)().pathname&&t("Suggestions"),Object(F.jsx)("nav",{className:a.nav,children:Object(F.jsx)("ul",{className:a.ul,children:u.map((function(e){return Object(F.jsx)(ne.c,{style:{textDecoration:"none",color:"inherit"},activeStyle:{padding:"4px",backgroundColor:"#202020",fontWeight:"bold",color:"#FF3B2D"},to:"/produits/".concat(e.categoryName),onClick:function(){return t(e.title)},children:Object(F.jsxs)("li",{className:a.li,children:[Object(F.jsx)("div",{className:a.imgWrapper,children:Object(F.jsx)("img",{className:a.image,src:e.icon,alt:e.categoryName})}),Object(F.jsx)("span",{className:a.span,children:e.title})]})},e.categoryName)}))})})},ie=a(199),ce=function(e){var t=e.setOpenLoginModal,a=e.user,n=Object(j.a)((function(e){return{root:{flexGrow:1,marginBottom:e.spacing(2),backgroundColor:"black",borderBottom:"1px solid #FF3B2D"},menuButton:{marginRight:e.spacing(2)},imageContainer:{flexGrow:1},image:{width:"150px",height:"75px"},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"}}}))();return Object(F.jsx)("div",{className:n.root,children:Object(F.jsx)(X.a,{position:"static",color:"transparent",children:Object(F.jsxs)(ie.a,{children:[Object(F.jsx)("div",{className:n.imageContainer,children:Object(F.jsx)(ne.b,{to:"/",children:Object(F.jsx)("img",{src:" /assets/logo/20hvin.png",className:n.image,alt:"logo 20hvin"})})}),Object(F.jsx)(_.a,{color:"inherit",disabled:!!a,onClick:function(){return t(!0)},children:a?"Conn\xe9ct\xe9 !":"Me Connecter"})]})})})},re=(a(141),function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([]),u=Object(s.a)(i,2),p=u[0],j=u[1],g=Object(n.useState)(!1),b=Object(s.a)(g,2),m=b[0],f=b[1],O=Object(n.useState)(""),h=Object(s.a)(O,2),x=h[0],y=h[1],v=Object(n.useState)(!1),C=Object(s.a)(v,2),S=C[0],w=C[1],N=navigator.language||navigator.userLanguage,_={get:function(e,t){return((JSON.parse(localStorage.getItem("translations"))||{})[t]||{})[e]},set:function(e,t,a){var n=JSON.parse(localStorage.getItem("translations"))||Object(r.a)({},t,{});n[t]=Object(c.a)(Object(c.a)({},n[t]),{},Object(r.a)({},e,a)),localStorage.setItem("translations",JSON.stringify(n))}};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(l.b,{cacheProvider:_,from:"fr",to:N,googleApiKey:"AIzaSyBlV19qRfHj05YOzkkavxXTS2HGx2D54Ps",children:Object(F.jsxs)("div",{className:"App",children:[Object(F.jsx)(ce,{setOpenLoginModal:f,user:x}),Object(F.jsx)(ee,{openLoginModal:m,setUser:y,setOpenLoginModal:f}),Object(F.jsx)(oe,{setProduct:o}),Object(F.jsxs)(d.d,{children:[Object(F.jsx)(d.b,{exact:!0,path:"/",children:Object(F.jsx)(d.a,{to:"/produits/suggestions"})}),Object(F.jsxs)(d.b,{path:"/produits/:category",children:["isAdmin"===x&&Object(F.jsx)(A,{showAddProduct:S,setShowAddProduct:w,products:p,setProducts:j,setOpenLoginModal:f}),Object(F.jsx)($,{products:p,setProducts:j,product:a,user:x,setOpenLoginModal:f})]})]})]})}),Object(F.jsx)(ae,{})]})}),se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,212)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),o(e),i(e),c(e)}))};i.a.render(Object(F.jsx)(ne.a,{basename:"/",children:Object(F.jsx)(re,{})}),document.getElementById("root")),se()}},[[142,1,2]]]);
//# sourceMappingURL=main.b727e467.chunk.js.map